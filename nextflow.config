params.outdir = params.outdir ?: 'results'

manifest {
    name = 'seqera-smoke-test'
    description = 'Smoke test for Seqera Platform with WRROC support'
    homePage = 'https://github.com/data-yaml/seqera-smoke-test'
    author = 'Ernest Prabhakar'
    mainScript = 'main.nf'
    version = '1.0.0'
}

// Load nf-prov plugin for workflow provenance
plugins {
    id 'nf-prov@1.4.0'
}

// Enable nf-prov for WRROC support
prov {
    enabled = true
    formats {
        wrroc {
            file = "${params.outdir}/ro-crate-metadata.json"
            overwrite = true
            repository = "https://github.com/data-yaml/seqera-smoke-test"
            agent {
                name = "Ernest Prabhakar"
                orcid = "https://orcid.org/0009-0003-3768-3781"
            }
            license = "https://spdx.org/licenses/MIT"
            profile = "provenance_run_crate"
        }
    }
}

profiles {
    docker {
        docker.enabled = true
        process {
            container = 'ubuntu:22.04'
        }
    }

    awsbatch {
        process {
            executor = 'awsbatch'
            container = 'ubuntu:22.04'
        }
    }
}

// Default to docker for local runs
process {
    container = 'ubuntu:22.04'
}
